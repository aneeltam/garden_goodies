<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact us</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="newmessage-body">
    <div class="header">
        <div class="pure-menu pure-menu-horizontal">
            <a class="pure-menu-heading" href="">Garden Goodies</a>
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><a href="/" class="pure-menu-link">Home</a></li>
                <li class="pure-menu-item"><a href="/guestbook" class="pure-menu-link">Community</a></li>
                <li class="pure-menu-item"><a href="/newmessage" class="pure-menu-link">Contact us</a></li>
                <li class="pure-menu-item"><a href="/ajaxmessage" class="pure-menu-link">Private Inquiry</a></li>
            </ul>
        </div>
    </div>
<div class="newmessage-body">
    <div id="newMessageFormContainer" class="newmessage-container">
        <h1 class="newmessage-title">Leave a Message</h1>
        <form id="newMessageForm" class="pure-form pure-form-aligned">
            <fieldset>
                <div class="pure-control-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="Username" required>
                </div>
                <div class="pure-control-group">
                    <label for="country">Country</label>
                    <input type="text" id="country" name="country" placeholder="Country" required>
                </div>
                <div class="pure-control-group">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" placeholder="Your message" required></textarea>
                </div>
                <div class="pure-controls">
                    <button type="submit" class="pure-button pure-button-primary">Submit</button>
                    <button type="button" class="pure-button" onclick="goBack()">Cancel</button>
                </div>
            </fieldset>
        </form>
    </div>

    <script>
        // Handle the form submission for traditional form
        document.getElementById('newMessageForm').addEventListener('submit', (event) => {
            event.preventDefault();

            const username = document.getElementById('username').value;
            const country = document.getElementById('country').value;
            const message = document.getElementById('message').value;

            fetch('/newmessage', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, country, message }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Your message was saved successfully!');
                    window.location.href = '/guestbook';
                }
            })
            .catch(console.error);
        });

        // Function to go back to the previous page
        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>
